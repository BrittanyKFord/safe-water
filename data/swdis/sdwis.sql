CREATE TABLE IF NOT EXISTS sdwis.WATER_SYSTEM (
	ADDRESS_LINE1 VARCHAR(200),
	ADDRESS_LINE2 VARCHAR(200),
	ADMIN_NAME VARCHAR(100),
	ALT_PHONE_NUMERIC VARCHAR(15),
	CDS_ID VARCHAR(100),
	CITY_NAME VARCHAR(40),
	COUNTRY_CODE VARCHAR(2),
	DBPR_SCHEDULE_CAT_CODE VARCHAR(6),
	EMAIL_ADDR VARCHAR(100),
	EPA_REGION VARCHAR(2),
	FAX_NUMERIC VARCHAR(15),
	GW_SW_CODE VARCHAR(2),
	IS_GRANT_ELIGIBLE_IND CHAR(1),
	IS_SCHOOL_OR_DAYCARE_IND CHAR(1),
	IS_WHOLESALER_IND CHAR(1),
	LT2_SCHEDULE_CAT_CODE VARCHAR(6),
	ORG_NAME VARCHAR(100),
	OUTSTANDING_PERFORMER VARCHAR(2),
	OUTSTANDING_PERFORM_BEGIN_DATE DATE,
	OWNER_TYPE_CODE CHAR(1),
	PHONE_EXT_NUMERIC VARCHAR(5),
	PHONE_NUMERIC VARCHAR(15),
	POPULATION_SERVED_COUNT NUMERIC(9),
	POP_CAT_11_CODE VARCHAR(2),
	POP_CAT_2_CODE VARCHAR(2),
	POP_CAT_3_CODE VARCHAR(2),
	POP_CAT_4_CODE VARCHAR(2),
	POP_CAT_5_CODE VARCHAR(2),
	PRIMACY_AGENCY_CODE VARCHAR(2),
	PRIMACY_TYPE VARCHAR(20),
	PRIMARY_SOURCE_CODE VARCHAR(4),
	PWSID VARCHAR(9) PRIMARY KEY,
	PWS_ACTIVITY_CODE CHAR(1),
	PWS_DEACTIVATION_DATE DATE,
	PWS_NAME VARCHAR(100),
	PWS_TYPE_CODE VARCHAR(6),
	SEASON_BEGIN_DATE VARCHAR(5),
	SEASON_END_DATE VARCHAR(5),
	SERVICE_CONNECTIONS_COUNT NUMERIC(9,0),
	SOURCE_PROTECTION_BEGIN_DATE DATE,
	SOURCE_WATER_PROTECTION_CODE VARCHAR(2),
	STATE_CODE VARCHAR(2),
	SUBMISSION_STATUS_CODE VARCHAR(4),
	ZIP_CODE VARCHAR(14)
);
CREATE TABLE IF NOT EXISTS sdwis.WATER_SYSTEM_FACILITY (
	AVAILABILITY_CODE VARCHAR(4),
	EPA_REGION VARCHAR(2),
	FACILITY_ACTIVITY_CODE CHAR(1),
	FACILITY_DEACTIVATION_DATE DATE,
	FACILITY_ID VARCHAR(12) PRIMARY KEY,
	FACILITY_NAME VARCHAR(100),
	FACILITY_TYPE_CODE VARCHAR(4),
	FILTRATION_STATUS_CODE VARCHAR(4),
	IS_SOURCE_IND CHAR(1),
	IS_SOURCE_TREATED_IND VARCHAR(1),
	PRIMACY_AGENCY_CODE VARCHAR(2),
	PWSID VARCHAR(9),
	PWS_ACTIVITY_CODE CHAR(1),
	PWS_DEACTIVATION_DATE DATE,
	PWS_TYPE_CODE VARCHAR(6),
	SELLER_PWSID VARCHAR(9),
	SELLER_PWS_NAME VARCHAR(100),
	SELLER_TREATMENT_CODE VARCHAR(4),
	STATE_FACILITY_ID VARCHAR(40),
	SUBMISSION_STATUS_CODE VARCHAR(4),
	WATER_TYPE_CODE VARCHAR(4),
    FOREIGN KEY (SELLER_PWSID) REFERENCES sdwis.WATER_SYSTEM(PWSID)
);
CREATE TABLE IF NOT EXISTS sdwis.ENFORCEMENT_ACTION (
	ENFORCEMENT_ACTION_TYPE_CODE VARCHAR(4),
	ENFORCEMENT_COMMENT_TEXT VARCHAR(2000),
	ENFORCEMENT_DATE DATE,
	ENFORCEMENT_ID VARCHAR(20) PRIMARY KEY,
	ORIGINATOR_CODE VARCHAR(4),
	PWSID VARCHAR(9),
    FOREIGN KEY (PWSID) REFERENCES sdwis.WATER_SYSTEM(PWSID)
);
CREATE TABLE IF NOT EXISTS sdwis.GEOGRAPHIC_AREA (
	ANSI_ENTITY_CODE VARCHAR(4),
	AREA_TYPE_CODE VARCHAR(4),
	CITY_SERVED VARCHAR(40),
	COUNTY_SERVED VARCHAR(40),
	EPA_REGION VARCHAR(2) NOT NULL,
	GEO_ID VARCHAR(20),
	PRIMACY_AGENCY_CODE VARCHAR(2),
	PWSID VARCHAR(9),
	PWS_ACTIVITY_CODE CHAR(1),
	PWS_TYPE_CODE VARCHAR(6),
	STATE_SERVED VARCHAR(4),
	TRIBAL_CODE VARCHAR(10),
	ZIP_CODE_SERVED VARCHAR(5) NOT NULL,
    FOREIGN KEY (PWSID) REFERENCES sdwis.WATER_SYSTEM(PWSID)
);
CREATE TABLE IF NOT EXISTS sdwis.LCR_SAMPLE_RESULT (
	CONTAMINANT_CODE VARCHAR(4),
	EPA_REGION VARCHAR(2),
	PRIMACY_AGENCY_CODE VARCHAR(2),
	PWSID VARCHAR(9),
	RESULT_SIGN_CODE VARCHAR(1),
	SAMPLE_ID VARCHAR(20),
	SAMPLE_MEASURE NUMERIC(15,9),
	SAR_ID NUMERIC(9,0),
	UNIT_OF_MEASURE VARCHAR(9),
    FOREIGN KEY (PWSID) REFERENCES sdwis.WATER_SYSTEM(PWSID)
);
CREATE TABLE IF NOT EXISTS sdwis.LCR_SAMPLE (
	EPA_REGION VARCHAR(2),
	PRIMACY_AGENCY_CODE VARCHAR(2),
	PWSID VARCHAR(9),
	RECONCILIATION_ID VARCHAR(40),
	SAMPLE_ID VARCHAR(20),
	SAMPLING_END_DATE DATE,
	SAMPLING_START_DATE DATE,
    FOREIGN KEY (PWSID) REFERENCES sdwis.WATER_SYSTEM(PWSID)
);
CREATE TABLE IF NOT EXISTS sdwis.SERVICE_AREA (
	EPA_REGION VARCHAR(2),
	IS_PRIMARY_SERVICE_AREA_CODE CHAR(1),
	PRIMACY_AGENCY_CODE VARCHAR(2),
	PWSID VARCHAR(9),
	PWS_ACTIVITY_CODE CHAR(1),
	PWS_TYPE_CODE VARCHAR(6),
	SERVICE_AREA_TYPE_CODE VARCHAR(4),
    FOREIGN KEY (PWSID) REFERENCES sdwis.WATER_SYSTEM(PWSID)
);
CREATE TABLE IF NOT EXISTS sdwis.TREATMENT (
	COMMENTS_TEXT VARCHAR(2000),
	FACILITY_ID VARCHAR(12),
	PWSID VARCHAR(9),
	TREATMENT_ID VARCHAR(20) PRIMARY KEY,
	TREATMENT_OBJECTIVE_Code VARCHAR(4),
	TREATMENT_PROCESS_CODE VARCHAR(4),
    FOREIGN KEY (PWSID) REFERENCES sdwis.WATER_SYSTEM(PWSID),
    FOREIGN KEY (FACILITY_ID) REFERENCES sdwis.WATER_SYSTEM_FACILITY(FACILITY_ID)
);
CREATE TABLE IF NOT EXISTS sdwis.VIOLATION (
	COMPLIANCE_STATUS_CODE VARCHAR(4),
	COMPL_PER_BEGIN_DATE DATE,
	COMPL_PER_END_DATE DATE,
	CONTAMINANT_CODE VARCHAR(4),
	CORRECTIVE_ACTION_ID VARCHAR(40),
	EPA_REGION VARCHAR(2),
	FACILITY_ID VARCHAR(12),
	IS_HEALTH_BASED_IND CHAR(1),
	IS_MAJOR_VIOL_IND CHAR(1),
	LATEST_ENFORCEMENT_ID VARCHAR(20),
	ORIGINATOR_CODE VARCHAR(4),
	POPULATION_SERVED_COUNT NUMERIC(9),
	POP_CAT_5_CODE VARCHAR(2),
	PRIMACY_AGENCY_CODE VARCHAR(2),
	PRIMARY_SOURCE_CODE VARCHAR(4),
	PUBLIC_NOTIFICATION_TIER NUMERIC(2,0),
	PWSID VARCHAR(9),
	PWS_ACTIVITY_CODE CHAR(1),
	PWS_DEACTIVATION_DATE DATE,
	PWS_TYPE_CODE VARCHAR(6),
	RTC_DATE DATE,
	RTC_ENFORCEMENT_ID VARCHAR(20),
	RULE_CODE VARCHAR(3),
	RULE_FAMILY_CODE VARCHAR(3),
	RULE_GROUP_CODE VARCHAR(3),
	SAMPLE_RESULT_ID VARCHAR(40),
	SEVERITY_IND_CNT NUMERIC(9,0),
	STATE_MCL NUMERIC(15,9),
	UNIT_OF_MEASURE VARCHAR(9),
	VIOLATION_CATEGORY_CODE VARCHAR(5),
	VIOLATION_CODE VARCHAR(4),
	VIOLATION_ID VARCHAR(20) PRIMARY KEY,
	VIOL_MEASURE NUMERIC(15,9),
    FOREIGN KEY (PWSID) REFERENCES sdwis.WATER_SYSTEM(PWSID),
    FOREIGN KEY (FACILITY_ID) REFERENCES sdwis.WATER_SYSTEM_FACILITY(FACILITY_ID)
);
CREATE TABLE IF NOT EXISTS sdwis.VIOLATION_ENF_ASSOC (
	ENFORCEMENT_ID VARCHAR(20),
	PWSID VARCHAR(9),
	VIOLATION_ID VARCHAR(20),
    FOREIGN KEY (PWSID) REFERENCES sdwis.WATER_SYSTEM(PWSID),
    FOREIGN KEY (VIOLATION_ID) REFERENCES sdwis.VIOLATION(VIOLATION_ID),
    FOREIGN KEY (ENFORCEMENT_ID) REFERENCES sdwis.ENFORCEMENT_ACTION(ENFORCEMENT_ID)
);
